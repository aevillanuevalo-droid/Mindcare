<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Test de Estr√©s y Ansiedad</title>

<style>
body {
    font-family: Arial, sans-serif;
    background: #eef2f3;
    padding: 20px;
}

.container {
    max-width: 700px;
    margin: auto;
    background: white;
    padding: 25px;
    border-radius: 12px;
    box-shadow: 0 0 12px rgba(0,0,0,0.1);
}

h2 {
    text-align: center;
}

.question {
    margin-bottom: 20px;
    font-weight: bold;
}

.options {
    margin-left: 10px;
    font-weight: normal;
}

/* Barra de progreso */
.progress-container {
    width: 100%;
    background: #d9d9d9;
    border-radius: 30px;
    overflow: hidden;
    margin-bottom: 20px;
    height: 20px;
}

.progress-bar {
    height: 100%;
    width: 0%;
    background: linear-gradient(90deg, #0d6efd, #4dabff);
    transition: width 0.3s ease-in-out;
}

/* Resultado con animaci√≥n */
#resultado {
    margin-top: 25px;
    font-size: 20px;
    font-weight: bold;
    padding: 15px;
    border-radius: 10px;
    background: #f7f7f7;
    opacity: 0;
    transform: scale(0.8);
    transition: opacity 0.6s ease, transform 0.4s ease;
}

/* Animaci√≥n tipo "pop" */
.pop {
    animation: pop 0.5s ease forwards;
}

@keyframes pop {
    0% { transform: scale(0.7); }
    50% { transform: scale(1.05); }
    100% { transform: scale(1); }
}
</style>
</head>

<body>
<div class="container">

    <h2>üß† Test: ¬øTengo Estr√©s o Ansiedad?</h2>
    <p>Marca una opci√≥n en cada pregunta:<br>
    <strong>0 = Nunca | 1 = A veces | 2 = Frecuentemente | 3 = Siempre</strong></p>

    <!-- Barra de progreso -->
    <div class="progress-container">
        <div class="progress-bar" id="barra"></div>
    </div>

    <form id="testAnsiedad">

        <!-- Preguntas generadas autom√°ticamente -->
        <script>
        const preguntas = [
            "Me siento cansada(o) aunque haya descansado.",
            "Me cuesta concentrarme en clases, trabajo u otras actividades.",
            "Me siento tensa(o), nerviosa(o) o preocupada(o) sin raz√≥n clara.",
            "Siento presi√≥n en el pecho o respiraci√≥n acelerada.",
            "Me irrito o enojo f√°cilmente.",
            "Tengo dificultad para dormir o descanso mal.",
            "Siento que no puedo con todas mis responsabilidades.",
            "Pierdo inter√©s en actividades que antes disfrutaba.",
            "Me cuesta tomar decisiones o pensar con claridad.",
            "Tengo dolores de cabeza, est√≥mago o musculares frecuentes."
        ];

        document.write("<div>");
        preguntas.forEach((pregunta, i) => {
            let num = i + 1;
            document.write(`
                <div class="question">
                    ${num}. ${pregunta}
                    <div class="options">
                        <input type="radio" name="p${num}" value="0" onchange="actualizarBarra()"> 0 (Nunca)
                        <input type="radio" name="p${num}" value="1" onchange="actualizarBarra()"> 1 (A veces)
                        <input type="radio" name="p${num}" value="2" onchange="actualizarBarra()"> 2 (Frecuentemente)
                        <input type="radio" name="p${num}" value="3" onchange="actualizarBarra()"> 3 (Siempre)
                    </div>
                </div>
            `);
        });
        document.write("</div>");
        </script>

        <button type="button" onclick="calcular()">Calcular resultado</button>
    </form>

    <div id="resultado"></div>

    <div id="mensaje" style="margin-top:20px; font-size:17px; line-height:1.5;"></div>

</div>

<script>
// Actualizar barra de progreso
function actualizarBarra() {
    let respondidas = 0;

    for (let i = 1; i <= 10; i++) {
        if (document.querySelector(`input[name="p${i}"]:checked`)) {
            respondidas++;
        }
    }

    let porcentaje = (respondidas / 10) * 100;
    document.getElementById("barra").style.width = porcentaje + "%";
}

// Calcular resultado con animaci√≥n final
function calcular() {
    let total = 0;

    for (let i = 1; i <= 10; i++) {
        let r = document.querySelector(`input[name='p${i}']:checked`);
        if (!r) {
            alert("Por favor responde todas las preguntas.");
            return;
        }
        total += parseInt(r.value);
    }

    let interpretacion = "";
    if (total <= 7) {
        interpretacion = "(‚óï‚Äø‚óï) Bajo estr√©s/ansiedad.";
    } else if (total <= 15) {
        interpretacion = "(À∂¬∫‚§ô¬∫À∂) Estr√©s moderado.";
    } else if (total <= 24) {
        interpretacion = "(√≥Ôπè√≤ÔΩ°) Estr√©s alto / ansiedad significativa.";
    } else {
        interpretacion = "(‚ï•Ôπè‚ï•) Muy alto estr√©s / riesgo de ansiedad.";
    }

    let resultado = document.getElementById("resultado");

    resultado.innerHTML =
        `Puntaje total: <strong>${total}/30</strong><br>${interpretacion}`;

    // Aparece con animaci√≥n
    resultado.style.opacity = "1";
    resultado.style.transform = "scale(1)";
    resultado.classList.remove("pop"); 
    void resultado.offsetWidth;       // Reinicia animaci√≥n si se calcula m√°s de una vez
    resultado.classList.add("pop");

    document.getElementById("mensaje").innerHTML = `
        üåø <i>‚ÄúReconocer c√≥mo nos sentimos es el primer paso para cuidarnos. 
        No est√°s sola(o); pedir apoyo y descansar tambi√©n es parte del √©xito.‚Äù</i>
        <br><br>
        <strong>MindCare UCV</strong> invita a detenerse, respirar y reconectarse con uno mismo.
    `;
}
</script>

</body>
</html>
